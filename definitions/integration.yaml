##################
#     REQUEST    #
##################

AuthenticateIntegrationPayload:
  type: object
  required:
    - type
  properties:
    type:
      type: string


##################
#    RESPONSE    #
##################

CreateIntegrationResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          $ref: '#/IntegrationMeta'

GetIntegrationResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          $ref: '#/definitions/Integration'

ListIntegrationsResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          type: array
          items:
            $ref: '#/definitions/IntegrationMeta'

UpdateIntegrationResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          $ref: '#/IntegrationMeta'

EnableDisableIntegrationResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          $ref: '#/IntegrationMeta'

ActionCategorizedListResponse:
  type: object
  allOf:
    - $ref: '#/definitions/BaseResponse'
    - properties:
        data:
          $ref: '#/ActionCategorizedList'

ActionCategorizedList:
  type: object
  properties:
    _parent:
      $ref: '#/IntegrationMeta'
    ignore:
      type: array
      items:
        $ref: '#/IgnoreIntegrationAction'
    create:
      type: array
      items:
        $ref: '#/AlertCreateIntegrationAction'
    close:
      type: array
      items:
        $ref: '#/AlertCloseIntegrationAction'
    acknowledge:
      type: array
      items:
        $ref: '#/AlertAckIntegrationAction'
    addNote:
      type: array
      items:
        $ref: '#/AlertNoteIntegrationAction'


IntegrationMeta:
  type: object
  properties:
    id:
      type: string
    name:
      type: string
    enabled:
      type: boolean
    type:
      type: string


##################
#      MODEL     #
##################
Integration:
  type: object
  discriminator: type
  required:
    - name
    - type
  properties:
    _readOnly:
      type: array
      items:
        type: string
    type:
      type: string
      enum:
        - Datadog
        - OpsGenie
        - Jira
        - JiraServiceDesk
        - ServiceNowV2
        - Circonus
        - ConnectWise
        - Desk
        - ESWatcher
        - Freshdesk
        - HipChatV2
        - Icinga
        - Icinga2
        - Kayako
        - LogicMonitor
        - Marid
        - Mattermost
        - NagiosV2
        - NagiosXIV2
        - MSTeams
        - OP5
        - Solarwinds
        - SolarWindsWebHelpDesk
        - Stackdriver
        - StatusIO
        - StatusPageIO
        - Zabbix
        - Zendesk
        - Zenoss
        # EmailBasedIncomingIntegrations
        - AutoTaskEmail
        - AutotaskAEMEmail
        - Email
        - LabTechEmail
        - NeustarEmail
        - RedGateSqlMonitorEmail
        - RingCentralEmail
        - UptrendsEmail
        # TokenBasedIncomingIntegrations
        - Airbrake
        - AlertLogic
        - AlertSite
        - AmazonCloudTrail
        - CloudWatch
        - AmazonEc2AutoScaling
        - AmazonRds
        - AmazonRoute53HealthCheck
        - AmazonSes
        - AmazonSns
        - API
        - AppDynamics
        - AppSignal
        - Atatus
        - Azure
        - AzureOMS
        - Boundary
        - Catchpoint
        - CheckMK
        - Cherwell
        - CircleCi
        - CloudMonix
        - CloudSploit
        - Codeship
        - Compose
        - Consul
        - CopperEgg
        - Crashlytics
        - DataloopIO
        - Detectify
        - DNSCheck
        - DripStat
        - Dynatrace
        - Errorception
        - EvidentIO
        - Freshservice
        - GhostInspector
        - GoogleStackdriver
        - GrafanaV2
        - Graylog
        - Heartbeat
        - Honeybadger
        - HostedGraphite
        - Librato
        - Logentries
        - Loggly
        - Logstash
        - LogzIO
        - MongoDBCloud
        - Monitis
        - Netuitive
        - NewRelic
        - NewRelicV2
        - NodePing
        - ObserviumV2
        - OEM
        - OpsDash
        - PagerDutyCompatibility
        - Panopta
        - Papertrail
        - PingdomV2
        - Pingometer
        - Prometheus
        - Prtg
        - Rackspace
        - Riemann
        - Rigor
        - Rollbar
        - Runscope
        - Scalyr
        - SCOM
        - Scout
        - SematextSpm
        - Sensu
        - ServerDensity
        - ServerGuard24
        - SignalSciences
        - Signalfx
        - Site24x7
        - Soasta
        - SolarwindsMSPNCentral
        - Splunk
        - StatusCake
        - StruxureWare
        - SumoLogic
        - SysdigCloud
        - ThousandEyes
        - ThreatStack
        - Tideways
        - TravisCI
        - Twilio
        - UptimeWebhook
        - UptimeRobot
        - VCenter
        - Wavefront
        # OutgoingIntegrations
        - AmazonSnsOutgoing
        - Campfire
        - Flock
        - Flowdock
        - FlowdockV2
        - Kore
        - Moxtra
        - Planio
        - RingCentralGlip
        - Webhook
    id:
      type: string
    name:
      type: string
    ownerTeam:
      $ref: '#/TeamMeta'
    enabled:
      type: boolean
    isGlobal:
      type: boolean

TeamMeta:
  type: object
  properties:
    id:
      type: string
    name:
      type: string

AlertFilter:
  type: object
  properties:
    conditionMatchType:
      type: string
      enum:
        - match-all
        - match-any-condition
        - match-all-conditions
    conditions:
      type: array
      items:
        $ref: '#/CallbackCondition'

CallbackCondition:
  type: object
  properties:
    field:
      type: string
      enum:
        - message
        - alias
        - description
        - source
        - entity
        - tags
        - actions
        - extra-properties
        - recipients
        - teams
    not:
      type: boolean
    operation:
      type: string
      enum:
        - matches
        - contains
        - starts-with
        - ends-with
        - equals
        - contains-key
        - contains-value
        - greater-than
        - less-than
        - is-empty
        - equals-ignore-whitespace
    expectedValue:
      type: string
    order:
      type: integer
      format: int32
    isNot:
      type: boolean

BaseIncomingFeature:
  type: object
  discriminator: feature-type
  properties:
    suppressNotifications:
      type: boolean
    ignoreTeamsFromPayload:
      type: boolean
    ignoreRecipientsFromPayload:
      type: boolean
    recipients:
      type: array
      items:
        $ref: '#/definitions/Recipient'
    isAdvanced:
      type: boolean
    feature-type:
      type: string
      enum:
        - email-based
        - token-based

TokenBasedIncomingFeature:
  type: object
  x-discriminator-value: token-based
  allOf:
    - $ref: '#/BaseIncomingFeature'
    - properties:
        allowConfigurationAccess:
          type: boolean
        allowWriteAccess:
          type: boolean

EmailBasedIncomingFeature:
  type: object
  x-discriminator-value: email-based
  required:
    - emailUsername
  allOf:
    - $ref: '#/BaseIncomingFeature'
    - properties:
        emailAddress:
          type: string
        emailUsername:
          type: string

BaseIntegrationAction:
  type: object
  discriminator: type
  required:
    - type
  properties:
    name:
      type: string
    order:
      type: integer
      format: int32
    filter:
      $ref: '#/IntegrationActionFilter'
    type:
      type: string
      enum:
        - ignore
        - acknowledge
        - addNote
        - close
        - create

IntegrationActionFilter:
  type: object
  properties:
    conditionMatchType:
      type: string
      enum:
        - match-all
        - match-any-condition
        - match-all-conditions
    conditions:
      type: array
      items:
        $ref: '#/IntegrationCondition'


IntegrationCondition:
  type: object
  required:
    - field
    - operation
    - expectedValue
  properties:
    field:
      type: string
    not:
      type: boolean
    operation:
      type: string
      enum:
        - matches
        - contains
        - starts-with
        - ends-with
        - equals
        - contains-key
        - contains-value
        - greater-than
        - less-than
        - is-empty
        - equals-ignore-whitespace
    expectedValue:
      type: string

IgnoreIntegrationAction:
  type: object
  x-discriminator-value: ignore
  allOf:
    - $ref: '#/BaseIntegrationAction'

AlertCreateIntegrationAction:
  type: object
  x-discriminator-value: create
  allOf:
    - $ref: '#/BaseIntegrationAction'
    - $ref: '#/AlertIntegrationAction'
    - properties:
        source:
          type: string
        message:
          type: string
        description:
          type: string
        entity:
          type: string
        priority:
          type: string
          enum:
            - P1
            - P2
            - P3
            - P4
            - P5
        appendAttachments:
          type: boolean
        alertActions:
          type: array
          items:
            type: string
        ignoreAlertActionsFromPayload:
          type: boolean
        recipients:
          type: array
          items:
            $ref: '#/definitions/Recipient'
        ignoreRecipientsFromPayload:
          type: boolean
        ignoreTeamsFromPayload:
          type: boolean
        tags:
          type: array
          items:
            type: string
        ignoreTagsFromPayload:
          type: boolean
        extraProperties:
          type: object
          additionalProperties:
            type: string
        ignoreExtraPropertiesFromPayload:
          type: boolean

AlertCloseIntegrationAction:
  type: object
  x-discriminator-value: close
  allOf:
    - $ref: '#/BaseIntegrationAction'
    - $ref: '#/AlertIntegrationAction'

AlertAckIntegrationAction:
  type: object
  x-discriminator-value: acknowledge
  allOf:
    - $ref: '#/BaseIntegrationAction'
    - $ref: '#/AlertIntegrationAction'

AlertNoteIntegrationAction:
  type: object
  x-discriminator-value: addNote
  allOf:
    - $ref: '#/BaseIntegrationAction'
    - $ref: '#/AlertIntegrationAction'

AlertIntegrationAction:
  type: object
  properties:
    user:
      type: string
    note:
      type: string
    alias:
      type: string

##############################
#     INTEGRATION MODELs     #
##############################

DatadogIntegration:
  type: object
  x-discriminator-value: Datadog
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/DatadogCallback'

OpsgenieIntegration:
  type: object
  x-discriminator-value: OpsGenie
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/OpsgenieCallback'

JiraIntegration:
  type: object
  x-discriminator-value: Jira
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/JiraCallback'

JiraServiceDeskIntegration:
  type: object
  x-discriminator-value: JiraServiceDesk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/JiraServiceDeskCallback'

ServiceNowV2Integration:
  type: object
  x-discriminator-value: ServiceNowV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/ServiceNowCallback'

CirconusIntegration:
  type: object
  x-discriminator-value: Circonus
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/CirconusCallback'

ConnectWiseIntegration:
  type: object
  x-discriminator-value: ConnectWise
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/ConnectWiseCallback'

DeskIntegration:
  type: object
  x-discriminator-value: Desk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/DeskCallback'

EsWatcherIntegration:
  type: object
  x-discriminator-value: ESWatcher
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/EsWatcherCallback'

FreshdeskIntegration:
  type: object
  x-discriminator-value: Freshdesk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/FreshdeskCallback'

HipchatV2Integration:
  type: object
  x-discriminator-value: HipChatV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/HipchatCallback'

IcingaIntegration:
  type: object
  x-discriminator-value: Icinga
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

Icinga2Integration:
  type: object
  x-discriminator-value: Icinga2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

KayakoIntegration:
  type: object
  x-discriminator-value: Kayako
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/KayakoCallback'

LogicMonitorIntegration:
  type: object
  x-discriminator-value: LogicMonitor
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/LogicMonitorCallback'

MaridIntegration:
  type: object
  x-discriminator-value: Marid
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

MattermostIntegration:
  type: object
  x-discriminator-value: Mattermost
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MattermostCallback'

NagiosV2Integration:
  type: object
  x-discriminator-value: NagiosV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

NagiosXIV2Integration:
  type: object
  x-discriminator-value: NagiosXIV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

MSTeamsIntegration:
  type: object
  x-discriminator-value: MSTeams
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MSTeamsCallback'
    - properties:
        executeCommands:
          type: boolean

Op5Integration:
  type: object
  x-discriminator-value: OP5
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/Op5Callback'

SolarwindsIntegration:
  type: object
  x-discriminator-value: Solarwinds
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

SolarWindsWebHelpDeskIntegration:
  type: object
  x-discriminator-value: SolarWindsWebHelpDesk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/SolarWindsWebHelpDeskCallback'

StackdriverIntegration:
  type: object
  x-discriminator-value: Stackdriver
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/StackdriverCallback'

StatusIOIntegration:
  type: object
  x-discriminator-value: StatusIO
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/StatusIOCallback'

StatusPageIOIntegration:
  type: object
  x-discriminator-value: StatusPageIO
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/StatusPageIOCallback'

ZabbixIntegration:
  type: object
  x-discriminator-value: Zabbix
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

ZendeskIntegration:
  type: object
  x-discriminator-value: Zendesk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/ZendeskCallback'

ZenossIntegration:
  type: object
  x-discriminator-value: Zenoss
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'
    - $ref: '#/MaridCallback'

#
# Email Based Incoming Integrations
#

AutoTaskEmailIntegration:
  type: object
  x-discriminator-value: AutoTaskEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

AutoTaskAEMEmailIntegration:
  type: object
  x-discriminator-value: AutotaskAEMEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

EmailIntegration:
  type: object
  x-discriminator-value: Email
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

LabTechEmailIntegration:
  type: object
  x-discriminator-value: LabTechEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

NeustarIntegration:
  type: object
  x-discriminator-value: NeustarEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

RedGateSqlMonitorEmailIntegration:
  type: object
  x-discriminator-value: RedGateSqlMonitorEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

RingCentralEmailIntegration:
  type: object
  x-discriminator-value: RingCentralEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

UptrendsEmailIntegration:
  type: object
  x-discriminator-value: UptrendsEmail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/EmailBasedIncomingFeature'

#
# Token Based Incoming Integrations
#

AirbrakeIntegration:
  type: object
  x-discriminator-value: Airbrake
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AlertLogicIntegration:
  type: object
  x-discriminator-value: AlertLogic
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AlertSiteIntegration:
  type: object
  x-discriminator-value: AlertSite
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonCloudTrailIntegration:
  type: object
  x-discriminator-value: AmazonCloudTrail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CloudWatchIntegration:
  type: object
  x-discriminator-value: CloudWatch
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonEc2AutoScalingIntegration:
  type: object
  x-discriminator-value: AmazonEc2AutoScaling
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonRdsIntegration:
  type: object
  x-discriminator-value: AmazonRds
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonRoute53HealthCheckIntegration:
  type: object
  x-discriminator-value: AmazonRoute53HealthCheck
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonSesIntegration:
  type: object
  x-discriminator-value: AmazonSes
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AmazonSnsIntegration:
  type: object
  x-discriminator-value: AmazonSns
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ApiIntegration:
  type: object
  x-discriminator-value: API
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AppDynamicsIntegration:
  type: object
  x-discriminator-value: AppDynamics
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AppSignalIntegration:
  type: object
  x-discriminator-value: AppSignal
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AtatusIntegration:
  type: object
  x-discriminator-value: Atatus
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AzureIntegration:
  type: object
  x-discriminator-value: Azure
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

AzureOMSIntegration:
  type: object
  x-discriminator-value: AzureOMS
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

BoundaryIntegration:
  type: object
  x-discriminator-value: Boundary
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CatchpointIntegration:
  type: object
  x-discriminator-value: Catchpoint
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CheckMKIntegration:
  type: object
  x-discriminator-value: CheckMK
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CherwellIntegration:
  type: object
  x-discriminator-value: Cherwell
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CircleCiIntegration:
  type: object
  x-discriminator-value: CircleCi
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CloudMonixIntegration:
  type: object
  x-discriminator-value: CloudMonix
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CloudSploitIntegration:
  type: object
  x-discriminator-value: CloudSploit
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CodeshipIntegration:
  type: object
  x-discriminator-value: Codeship
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ComposeIntegration:
  type: object
  x-discriminator-value: Compose
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ConsulIntegration:
  type: object
  x-discriminator-value: Consul
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CopperEggIntegration:
  type: object
  x-discriminator-value: CopperEgg
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

CrashlyticsIntegration:
  type: object
  x-discriminator-value: Crashlytics
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

DataloopIOIntegration:
  type: object
  x-discriminator-value: DataloopIO
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

DetectifyIntegration:
  type: object
  x-discriminator-value: Detectify
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

DNSCheckIntegration:
  type: object
  x-discriminator-value: DNSCheck
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

DripStatIntegration:
  type: object
  x-discriminator-value: DripStat
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

DynatraceIntegration:
  type: object
  x-discriminator-value: Dynatrace
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ErrorceptionIntegration:
  type: object
  x-discriminator-value: Errorception
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

EvidentIOIntegration:
  type: object
  x-discriminator-value: EvidentIO
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

FreshserviceIntegration:
  type: object
  x-discriminator-value: Freshservice
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

GhostInspectorIntegration:
  type: object
  x-discriminator-value: GhostInspector
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

GoogleStackdriverIntegration:
  type: object
  x-discriminator-value: GoogleStackdriver
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

GrafanaV2Integration:
  type: object
  x-discriminator-value: GrafanaV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

GraylogIntegration:
  type: object
  x-discriminator-value: Graylog
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

HeartbeatIntegration:
  type: object
  x-discriminator-value: Heartbeat
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

HoneybadgerIntegration:
  type: object
  x-discriminator-value: Honeybadger
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

HostedGraphiteIntegration:
  type: object
  x-discriminator-value: HostedGraphite
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

LibratoIntegration:
  type: object
  x-discriminator-value: Librato
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

LogentriesIntegration:
  type: object
  x-discriminator-value: Logentries
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

LogglyIntegration:
  type: object
  x-discriminator-value: Loggly
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

LogstashIntegration:
  type: object
  x-discriminator-value: Logstash
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

LogzIOIntegration:
  type: object
  x-discriminator-value: LogzIO
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

MongoDBCloudIntegration:
  type: object
  x-discriminator-value: MongoDBCloud
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

MonitisIntegration:
  type: object
  x-discriminator-value: Monitis
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

NetuitiveIntegration:
  type: object
  x-discriminator-value: Netuitive
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

NewRelicV2Integration:
  type: object
  x-discriminator-value: NewRelicV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

NewRelicIntegration:
  type: object
  x-discriminator-value: NewRelic
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

NodePingIntegration:
  type: object
  x-discriminator-value: NodePing
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ObserviumV2Integration:
  type: object
  x-discriminator-value: ObserviumV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

OEMIntegration:
  type: object
  x-discriminator-value: OEM
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

OpsDashIntegration:
  type: object
  x-discriminator-value: OpsDash
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PagerDutyCompatibilityIntegration:
  type: object
  x-discriminator-value: PagerDutyCompatibility
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PanoptaIntegration:
  type: object
  x-discriminator-value: Panopta
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PapertrailIntegration:
  type: object
  x-discriminator-value: Papertrail
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PingdomV2Integration:
  type: object
  x-discriminator-value: PingdomV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PingometerIntegration:
  type: object
  x-discriminator-value: Pingometer
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PrometheusIntegration:
  type: object
  x-discriminator-value: Prometheus
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

PrtgIntegration:
  type: object
  x-discriminator-value: Prtg
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

RackspaceIntegration:
  type: object
  x-discriminator-value: Rackspace
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

RiemannIntegration:
  type: object
  x-discriminator-value: Riemann
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

RigorIntegration:
  type: object
  x-discriminator-value: Rigor
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

RollbarIntegration:
  type: object
  x-discriminator-value: Rollbar
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

RunscopeIntegration:
  type: object
  x-discriminator-value: Runscope
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ScalyrIntegration:
  type: object
  x-discriminator-value: Scalyr
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SCOMIntegration:
  type: object
  x-discriminator-value: SCOM
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ScoutIntegration:
  type: object
  x-discriminator-value: Scout
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SematextSpmIntegration:
  type: object
  x-discriminator-value: SematextSpm
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SensuIntegration:
  type: object
  x-discriminator-value: Sensu
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ServerDensityIntegration:
  type: object
  x-discriminator-value: ServerDensity
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ServerGuard24Integration:
  type: object
  x-discriminator-value: ServerGuard24
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SignalSciencesIntegration:
  type: object
  x-discriminator-value: SignalSciences
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SignalfxIntegration:
  type: object
  x-discriminator-value: Signalfx
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

Site24x7Integration:
  type: object
  x-discriminator-value: Site24x7
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SoastaIntegration:
  type: object
  x-discriminator-value: Soasta
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SolarwindsMSPNCentralIntegration:
  type: object
  x-discriminator-value: SolarwindsMSPNCentral
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SplunkIntegration:
  type: object
  x-discriminator-value: Splunk
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

StatusCakeIntegration:
  type: object
  x-discriminator-value: StatusCake
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

StruxureWareIntegration:
  type: object
  x-discriminator-value: StruxureWare
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SumoLogicIntegration:
  type: object
  x-discriminator-value: SumoLogic
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

SysdigCloudIntegration:
  type: object
  x-discriminator-value: SysdigCloud
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ThousandEyesIntegration:
  type: object
  x-discriminator-value: ThousandEyes
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

ThreatStackIntegration:
  type: object
  x-discriminator-value: ThreatStack
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

TidewaysIntegration:
  type: object
  x-discriminator-value: Tideways
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

TravisCIIntegration:
  type: object
  x-discriminator-value: TravisCI
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

TwilioCIIntegration:
  type: object
  x-discriminator-value: Twilio
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

UptimeWebhookIntegration:
  type: object
  x-discriminator-value: UptimeWebhook
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

UptimeRobotIntegration:
  type: object
  x-discriminator-value: UptimeRobot
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

VCenterIntegration:
  type: object
  x-discriminator-value: VCenter
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

WavefrontIntegration:
  type: object
  x-discriminator-value: Wavefront
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/TokenBasedIncomingFeature'

#
# Outgoing Integrations
#

AmazonSnsOutgoingIntegration:
  type: object
  x-discriminator-value: AmazonSnsOutgoing
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/AmazonSnsCallback'

CampfireIntegration:
  type: object
  x-discriminator-value: Campfire
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/AmazonSnsCallback'

FlockIntegration:
  type: object
  x-discriminator-value: Flock
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/WebhookCallback'

FlowdockIntegration:
  type: object
  x-discriminator-value: Flowdock
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/FlowdockCallback'

FlowdockV2Integration:
  type: object
  x-discriminator-value: FlowdockV2
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/FlowdockV2Callback'

KoreIntegration:
  type: object
  x-discriminator-value: Kore
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/WebhookCallback'

MoxtraIntegration:
  type: object
  x-discriminator-value: Moxtra
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/WebhookCallback'

PlanioIntegration:
  type: object
  x-discriminator-value: Planio
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/PlanioCallback'

RingCentralGlipIntegration:
  type: object
  x-discriminator-value: RingCentralGlip
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/WebhookCallback'


WebhookIntegration:
  type: object
  x-discriminator-value: Webhook
  allOf:
    - $ref: '#/Integration'
    - $ref: '#/WebhookCallback'


##############################################
#     INTEGRATION COMMON CALLBACK MODELS     #
##############################################

OutgoingCallback:
  type: object
  discriminator: callback-type
  properties:
    alertFilter:
      $ref: '#/AlertFilter'
    alertActions:
      type: array
      items:
        type: string
    callback-type:
      type: string
      enum:
        - bidirectional-callback
        - webhook-callback
        - campfire-callback
        - flowdock-callback
        - flowdockv2-callback
        - planio-callback

OutgoingCallbackNew:
  type: object
  discriminator: callback-new-type
  properties:
    alertFilter:
      $ref: '#/AlertFilter'
    forwardingEnabled:
      type: boolean
    forwardingActionMappings:
      type: array
      items:
        $ref: '#/ActionMapping'
    callback-type:
      type: string
      enum:
        - bidirectional-callback-new
        - amazon-sns-callback

BidirectionalCallback:
  type: object
  x-discriminator-value: bidirectional-callback
  discriminator: bidirectional-callback-type
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        sendAlertActions:
          type: boolean
        bidirectional-callback-type:
          type: string
          enum:
            - datadog-callback
            - circonus-callback
            - connectwise-callback
            - desk-callback
            - eswatcher-callback
            - freshdesk-callback
            - hipchat-callback
            - marid-callback
            - logic-monitor-callback
            - mattermost-callback
            - slack-callback
            - solarwinds-web-helpdesk-callback
            - stackdriver-callback
            - statusio-callback


BidirectionalCallbackNew:
  type: object
  x-discriminator-value: bidirectional-callback-new
  discriminator: bidirectional-callback-new-type
  allOf:
    - $ref: '#/OutgoingCallbackNew'
    - properties:
        updatesActionMappings:
          type: array
          items:
            $ref: '#/ActionMapping'
        updatesEnabled:
          type: boolean
        bidirectional-callback-new-type:
          type: string
          enum:
            - opsgenie-callback
            - jira-callback
            - jira-servicedesk-callback
            - servicenow-callback
            - kayako-callback
            - msteams-callback
            - op5-callback
            - statuspageio-callback
            - zendesk-callback

##############################################
#     ACTION MAPPING MODELS                  #
##############################################

ActionMapping:
  type: object
  properties:
    action:
      type: string
      enum:
        - create
        - acknowledge
        - unacknowledge
        - snooze
        - escalate-to-next
        - add-note
        - add-recipient
        - add-team
        - add-tags
        - remove-tags
        - close
        - delete
        - escalate
        - custom-action
        - assign-ownership
        - take-ownership
    extraField:
      type: string
    extraFieldForMappedAction:
      type: string
    mappedAction:
      type: string
      enum:
        # Opsgenie Integration Mapped Actions
        - create-alert
        - close-alert
        - add-note
        - acknowledge-alert
        - unacknowledge-alert
        # Jira & Jira Service Desk Integration Mapped Actions
        - create-issue
        - add-comment-to-issue
        - in-progress-issue
        - resolve-issue
        - close-issue
        - issue-done
        # ServiceNow Integration Mapped Actions
        - create-incident
        - add-note-to-incident
        - resolve-incident
        - close-incident
        - assign-to-group
        - assign-to-user
        - assign-to-owner
        - senCustomEndpoint
        # Kayako Integration Mapped Actions
        # add-note already exists
        - add-tag
        - create-conversation
        - set-status-to-open
        - set-status-to-pending
        - set-status-to-completed
        # MSTeams Integration Mapped Actions
        - send-to-channel
        # Op5 Integration Mapped Actions
        - acknowledge
        # StatusPageIO Integration Mapped Actions
        # create-incident already exists
        - create-incident-and-update-component-statuses
        # resolve-incident already exists
        - resolve-incident-and-update-component-statuses-back-to-operational
        # add-note-to-incident already exists
        - update-component-statuses
        # Zendesk Integration Mapped Actions
        - create-ticket
        - add-internal-note
        - public-reply
        - set-status-to-closed
        # set-status-to-open already exists
        # set-status-to-pending already exists
        - set-status-to-solved
        # Amazon Sns Outgoing Integration Mapped Actions
        - publish


##############################################
#     INTEGRATION CALLBACK MODELS            #
##############################################

DatadogCallback:
  type: object
  x-discriminator-value: datadog-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        token:
          type: string

OpsgenieCallback:
  type: object
  x-discriminator-value: opsgenie-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        destinationApiKey:
          type: string
        apiKey:
          type: string

WebhookCallback:
  type: object
  x-discriminator-value: webhook-callback
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        url:
          type: string
        headers:
          type: object
          additionalProperties:
            type: string

JiraCallback:
  type: object
  x-discriminator-value: jira-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        jiraUsername:
          type: string
        jiraPassword:
          type: string
        jiraUrl:
          type: string
        projectKey:
          type: string
        issueTypeName:
          type: string

ServiceNowCallback:
  type: object
  x-discriminator-value: servicenow-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        scriptedRestAPIURL:
          type: string
        servicenowUserName:
          type: string
        servicenowPassword:
          type: string

CirconusCallback:
  type: object
  x-discriminator-value: circonus-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        circonusURL:
          type: string

ConnectWiseCallback:
  type: object
  x-discriminator-value: connectwise-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        awsLambdaUrl:
          type: string

DeskCallback:
  type: object
  x-discriminator-value: desk-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        consumerKey:
          type: string
        consumerKeySecret:
          type: string
        accessToken:
          type: string
        accessTokenSecret:
          type: string
        subdomain:
          type: string

EsWatcherCallback:
  type: object
  x-discriminator-value: eswatcher-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        eswatcherActionId:
          type: string
        eswatcherHostId:
          type: string

FreshdeskCallback:
  type: object
  x-discriminator-value: freshdesk-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        freshdeskApiKey:
          type: string
        freshdeskSubdomain:
          type: string

HipchatCallback:
  type: object
  x-discriminator-value: hipchat-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        rooms:
          type: array
          items:
            type: string
        token:
          type: string
        notify:
          type: boolean
        hostUrl:
          type: string

MaridCallback:
  type: object
  x-discriminator-value: marid-callback
  allOf:
    - $ref: '#/BidirectionalCallback'

JiraServiceDeskCallback:
  type: object
  x-discriminator-value: jira-servicedesk-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        jiraUsername:
          type: string
        jiraPassword:
          type: string
        jiraUrl:
          type: string
        projectKey:
          type: string
        issueTypeName:
          type: string

KayakoCallback:
  type: object
  x-discriminator-value: kayako-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        email:
          type: string
        password:
          type: string
        subdomain:
          type: string

LogicMonitorCallback:
  type: object
  x-discriminator-value: logic-monitor-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        accountName:
          type: string
        username:
          type: string
        password:
          type: string

MattermostCallback:
  type: object
  x-discriminator-value: mattermost-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        url:
          type: string

MSTeamsCallback:
  type: object
  x-discriminator-value: msteams-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        webhookUrl:
          type: string

Op5Callback:
  type: object
  x-discriminator-value: op5-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        username:
          type: string
        password:
          type: string
        url:
          type: string

SolarWindsWebHelpDeskCallback:
  type: object
  x-discriminator-value: solarwinds-web-helpdesk-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        solarWindsWebHelpDeskApiKey:
          type: string
        solarWindsWebHelpServerURL:
          type: string

StackdriverCallback:
  type: object
  x-discriminator-value: stackdriver-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        stackdriverApiKey:
          type: string

StatusIOCallback:
  type: object
  x-discriminator-value: statusio-callback
  allOf:
    - $ref: '#/BidirectionalCallback'
    - properties:
        statusIoApiId:
          type: string
        statusIoApiKey:
          type: string
        statusIoStatusPageId:
          type: string

StatusPageIOCallback:
  type: object
  x-discriminator-value: statuspageio-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        statusPagePageId:
          type: string
        statusPageApiKey:
          type: string

ZendeskCallback:
  type: object
  x-discriminator-value: zendesk-callback
  allOf:
    - $ref: '#/BidirectionalCallbackNew'
    - properties:
        zendeskApiToken:
          type: string
        zendeskEmail:
          type: string
        zendeskSubdomain:
          type: string

AmazonSnsCallback:
  type: object
  x-discriminator-value: amazon-sns-callback
  allOf:
    - $ref: '#/OutgoingCallbackNew'
    - properties:
        topicArn:
          type: string
        region:
          type: string

CampfireCallback:
  type: object
  x-discriminator-value: campfire-callback
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        token:
          type: string
        subdomain:
          type: string
        notify:
          type: boolean
        rooms:
          type: object
          additionalProperties:
            type: string

FlowdockCallback:
  type: object
  x-discriminator-value: flowdock-callback
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        flowdockApiToken:
          type: string
        flowdockTags:
          type: object
          additionalProperties:
            type: string
        externalUsername:
          type: string

FlowdockV2Callback:
  type: object
  x-discriminator-value: flowdockv2-callback
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        flowdockFlowToken:
          type: string

PlanioCallback:
  type: object
  x-discriminator-value: planio-callback
  allOf:
    - $ref: '#/OutgoingCallback'
    - properties:
        planioApiKey:
          type: string
        projectId:
          type: integer
          format: int32
        subdomain:
          type: string